--- git.orig/src/psiaccount.cpp
+++ git/src/psiaccount.cpp
@@ -2849,6 +2849,10 @@ void PsiAccount::setStatus(const Status 
 		}
 		// change status
 		else {
+			if (!isConnected()) {
+				disconnect();
+				login();
+			}
 			if(rosterDone) {
 				setStatusDirect(s, withPriority);
 			}
