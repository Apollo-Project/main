--- git.orig/src/chatdlg.cpp
+++ git/src/chatdlg.cpp
@@ -100,6 +100,7 @@ ChatDlg::ChatDlg(const Jid& jid, PsiAcco
 	transid_ = -1;
 	key_ = "";
 	lastWasEncrypted_ = false;
+	trackBar_ = false;
 
 	status_ = -1;
 
@@ -177,6 +178,12 @@ void ChatDlg::initComposing()
 	chatEditCreated();
 }
 
+void ChatDlg::doTrackBar()
+{
+	trackBar_ = false;
+	chatView()->doTrackBar();
+}
+
 void ChatDlg::initActions()
 {
 	act_send_ = new QAction(this);
@@ -339,6 +346,8 @@ void ChatDlg::logSelectionChanged()
 void ChatDlg::deactivated()
 {
 	TabbableWidget::deactivated();
+
+	trackBar_ = true;
 }
 
 void ChatDlg::activated()
@@ -353,6 +362,8 @@ void ChatDlg::activated()
 	doFlash(false);
 
 	chatEdit()->setFocus();
+
+	trackBar_ = false;
 }
 
 void ChatDlg::dropEvent(QDropEvent* event)
@@ -866,6 +877,9 @@ QString ChatDlg::whoNick(bool local) con
 
 void ChatDlg::appendMessage(const Message &m, bool local)
 {
+	if(trackBar_)
+		doTrackBar();
+
 	// figure out the encryption state
 	bool encChanged = false;
 	bool encEnabled = false;
--- git.orig/src/chatdlg.h
+++ git/src/chatdlg.h
@@ -184,6 +184,9 @@ private:
 	bool keepOpen_;
 	bool warnSend_;
 
+	bool trackBar_;
+	void doTrackBar();
+
 	QTimer* selfDestruct_;
 
 	QString key_;
