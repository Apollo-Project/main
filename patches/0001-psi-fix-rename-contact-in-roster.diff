--- psi.orig/src/contactlistdragview.cpp
+++ psi/src/contactlistdragview.cpp
@@ -53,6 +53,7 @@ ContactListDragView::ContactListDragView
 	, pressedIndex_(0)
 	, pressedIndexWasSelected_(false)
 	, viewportMenu_(0)
+	, editing(false)
 {
 	removeAction_ = new IconAction("", "psi/remove", QString(), ShortcutManager::instance()->shortcuts("contactlist.delete"), this, "act_remove");
 	connect(removeAction_, SIGNAL(triggered()), SLOT(removeSelection()));
@@ -99,13 +100,34 @@ void ContactListDragView::addContextMenu
 
 void ContactListDragView::setItemDelegate(QAbstractItemDelegate* delegate)
 {
-	if (delegate == itemDelegate())
+	QAbstractItemDelegate *oldDelegate = itemDelegate();
+	if (delegate == oldDelegate)
 		return;
+	if (delegate) {
+		connect(delegate, SIGNAL(commitData(QWidget*)), this, SLOT(finishedEditing()));
+		connect(delegate, SIGNAL(closeEditor(QWidget*)), this, SLOT(finishedEditing()));
+	}
 	ContactListView::setItemDelegate(delegate);
+	if (oldDelegate)
+		delete oldDelegate;
 	modelChanged();
 	doItemsLayout();
 }
 
+void ContactListDragView::finishedEditing()
+{
+	editing = false;
+}
+
+bool ContactListDragView::edit(const QModelIndex &index, EditTrigger trigger, QEvent *event)
+{
+	if (ContactListView::edit(index, trigger, event)) {
+		editing = true;
+		return true;
+	}
+	return false;
+}
+
 void ContactListDragView::leaveEvent(QEvent* e)
 {
 	ContactListView::leaveEvent(e);
@@ -788,7 +810,7 @@ void ContactListDragView::modelChanged()
 	if (!dirty_) {
 		setUpdatesEnabled(false);
 		backedUpVerticalScrollBarValue_ = verticalScrollBar()->value();
-		if (currentEditor()) {
+		if (currentEditor() && editing) {
 			backedUpEditorValue_ = currentEditor()->text();
 			closeEditor(currentEditor(), QAbstractItemDelegate::NoHint);
 			setEditingIndex(currentIndex(), true);
--- psi.orig/src/contactlistdragview.h
+++ psi/src/contactlistdragview.h
@@ -61,6 +61,7 @@ public:
 	bool extendedSelectionAllowed() const;
 
 	virtual bool drawSelectionBackground() const;
+	virtual bool edit(const QModelIndex &index, EditTrigger trigger, QEvent *event);
 
 public:
 	virtual int suggestedItemHeight();
@@ -127,6 +128,7 @@ private slots:
 	void updateCursorMouseHover(const QModelIndex&);
 	void updateCursorMouseHover();
 	void removeSelection();
+	void finishedEditing();
 
 private:
 	QMimeData* backedUpSelection_;
@@ -141,6 +143,7 @@ private:
 	QPoint pressPosition_;
 	bool pressedIndexWasSelected_;
 	QMenu* viewportMenu_;
+	bool editing;
 
 	void backupCurrentSelection();
 	void restoreBackedUpSelection();
--- psi.orig/src/contactlistmodel.cpp
+++ psi/src/contactlistmodel.cpp
@@ -629,13 +629,13 @@ bool ContactListModel::setData(const QMo
 	else if (role == Qt::EditRole) {
 		QString name = data.toString();
 		if ((contact = dynamic_cast<PsiContact*>(item->item()))) {
-			if (name.isEmpty()) {
+			//if (name.isEmpty()) {
 				// QMessageBox::information(0, tr("Error"), tr("You can't set a blank name."));
-				return false;
-			}
-			else {
+			//	return false;
+			//}
+			//else {
 				contact->setName(name);
-			}
+			//}
 		}
 		else if ((group = dynamic_cast<ContactListGroup*>(item->item()))) {
 			if (name.isEmpty()) {
