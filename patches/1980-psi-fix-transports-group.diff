--- psi.orig/src/contactlistnestedgroup.cpp
+++ psi/src/contactlistnestedgroup.cpp
@@ -55,7 +55,10 @@ void ContactListNestedGroup::addContact(
 	if (canContainSpecialGroups()) {
 		ContactListGroup* group = specialGroupFor(contact);
 		if (group) {
-			group->addContact(contact, contactGroups);
+			if (!contact->isAgent())
+				group->addContact(contact, contactGroups);
+			else
+				group->addContact(contact, QStringList() << QString());
 			return;
 		}
 	}
@@ -113,6 +116,9 @@ void ContactListNestedGroup::contactUpda
 
 void ContactListNestedGroup::contactGroupsChanged(PsiContact* contact, QStringList contactGroups)
 {
+	if (contact->isAgent())
+		return;
+
 	bool restrictContactAdd = false;
 	if (canContainSpecialGroups()) {
 		ContactListGroup* specialGroup = specialGroupFor(contact);
